**Introduction**

So far, we have created documents that do not have any parameter and where the data returned to the user is not filtered in any way. In real life, this is normally not the case as users normally require to filter the data returned by the report by various parameters such as date, month or year. When designing reports therefore, we need to make it flexible to suit the users query requirements. A value is generated by analytical driver which is then send to the parameter.

Consider the report below which we created in lesson seven. The report returns all data and does not have any parameters. 

![image](https://user-images.githubusercontent.com/5442305/128869055-5e9f8bbd-7285-42c9-aa73-b09c10c295b4.png)


The query that is used to generate the report is “select distinct itemgroup from admincosts2010” but we want to make a few modifications to it. What we want to do in this chapter is to group the results returned by the report into two categories:

1.	Staff Costs
2.	Other Administrative Costs

We will make the report dynamic such that when a user selects “Staff Costs” as a parameter, then the report will return only rows of items that are direct staff costs. Secondly, we don’t want to hard code the two groups in the report. We will make it dynamic such that in the future, when other categories are added by the company, then there will be no changes that will need to be done by the report. To make this work, there are several things that we will need to do:

1.	We will need to create parameters in the BIRT report using the Knowage report designer.
2.	We will need to create a List of values to allow us select the various groups of expenses e.g. Staff Costs.
3.	We will need to create an analytical driver.

BIRT report parameter

Follow these steps to create a report parameter in BIRT.
1.	Open the “Administrative Costs” report we created in chapter seven using Knowage report designer. You can also get the report under BIRT\Administrative Costs.rptdesign in the CD that came with this book.

2.	In the “Data Explorer” tab, right click on “Report Parameters” and select “New Parameter”.

 ![image](https://user-images.githubusercontent.com/5442305/128869096-a7dc3882-baac-42ca-a576-600082cc7c93.png)


3.	Under name, use param_item_group and for data type, select string. Click on OK.

 ![image](https://user-images.githubusercontent.com/5442305/128869123-f19f5071-0540-44fb-9522-9305c427345d.png)


4.	Under “Data Sets”, right click on “AdminCost” and select Edit.

 ![image](https://user-images.githubusercontent.com/5442305/128869144-f9994f4e-3fc1-4ffb-a822-8701dcbc70d2.png)


5.	Change the query from “select * from admincosts2010” to “select * from admincosts2010 where itemgroup=?”

 ![image](https://user-images.githubusercontent.com/5442305/128869154-631020d8-75dc-46b5-894c-369696fc0f7c.png)


The ? in the second query where clause is a place holder for a parameter which we need to define and link with the param_item_group we created in step 3 above.

6.	Under parameters, edit param_1.

 ![image](https://user-images.githubusercontent.com/5442305/128869177-637b97a5-92df-497e-a939-ef8c31f5eb74.png)


7.	Link it to param_item_group.

 ![image](https://user-images.githubusercontent.com/5442305/128869189-f2114cb2-377e-4d84-8538-2be450e67bc5.png)







List of Values (LOV).

From the description we gave in the introduction, we had stated that we will want the user to choose from a list the type of expense that he wants to view in the report. The group of items is defined in the column itemgroup in the table admincosts2010 as shown below.

 ![image](https://user-images.githubusercontent.com/5442305/128869215-84b8f0ae-be6d-4ce9-84da-7fdff1fdc20f.png)


Currently, only two groups exist but the report should be dynamic enough so that if other groups are added, then it will display them. This means that the groups should not be hard coded but should be read from a table. This is achieved by using a list of values in Knowage. Follow these steps to create a list of values in Knowage:
1.	Under “Behavioural model”, select “Lovs Management”.

 ![image](https://user-images.githubusercontent.com/5442305/128869230-9999a5cc-325e-4766-a72e-bed1f9d21b9f.png)


2.	Click on the plus icon to create a new LOV.
3.	For the label and name, use “LOV_ITEM_GROUP” and for the description use “LOV Item group”. Select “Query statement” for LOV type. Select your data source and use the query “select distinct itemgroup from admincosts2010”.

 ![image](https://user-images.githubusercontent.com/5442305/128869251-d6212091-c4c3-4b59-a1ea-e488d3f27cf8.png)


4.	Click on preview.

 ![image](https://user-images.githubusercontent.com/5442305/128869271-feb7c22e-0ab9-47fa-939a-9e0a6fded400.png)


5.	Click on Test and select value, description and visible buttons then click on save.

 ![image](https://user-images.githubusercontent.com/5442305/128869290-f300448e-4bfe-45f3-a9b0-4cae631c20c3.png)




Analytical Drivers
The last thing we need to create is an analytical driver which will enable us define the data type our parameter will return and the roles of the users that will be allowed to use it. Follow these steps to create an analytical driver:

1.	Under “Behavioural model”, select “Analytical drivers management”.

 ![image](https://user-images.githubusercontent.com/5442305/128869310-d4c063a3-9f38-4ef1-848f-d0527467b1d8.png)


2.	Click on the plus icon to create a new analytical driver. For the label and name, use AN_GROUP_ITEM and for the description, use “Analytical driver group item”. For the type, select String then save.

 ![image](https://user-images.githubusercontent.com/5442305/128869326-5e7889ef-5b3a-4f7f-92e2-72b1240d8021.png)


3.	Click on “Analytical Driver Use Mode Details” tab then select “New use mode”. For name, label and description, use “ALL”. For input type, use “LOV” and select the “LOV_ITEM_GROUP” we created previously. For modality, use “Select from list”.  For default value, select “None”. Under roles, select the role you want to use this analytical driver, in my case admin. Then Save.

 ![image](https://user-images.githubusercontent.com/5442305/128869347-f1f6fc65-4cb8-4c80-87d0-28c28090b740.png)


4.	Click on Save.

Now we need to modify the “Administrative Costs” document in SpagoBI to add the analytical driver. 

![image](https://user-images.githubusercontent.com/5442305/128869379-974c38cb-7a1c-4c57-8e62-f0393d952e9d.png)

 
Under “Analytical driver”, click on the search button and select the analytical driver AN_GROUP_ITEM we created previously and click on save.

![image](https://user-images.githubusercontent.com/5442305/128869399-5a567057-c9c2-4a07-89f7-b4b40a723638.png)

 
For the Title, use “Item Group” and for the URL Name, we need to enter the name of the parameter we had created in BIRT, that is param_item_group. Then ensure Required is checked.

![image](https://user-images.githubusercontent.com/5442305/128869420-1493093f-87ab-4b29-ac6f-6f29ce48975c.png)

 
Lastly, under template, select the new Administrative Costs.rptdesign or deploy it from the Knowage report designer. Now let us execute the document. The first thing you notice is that you need to select the item group.

![image](https://user-images.githubusercontent.com/5442305/128869443-7e89f08b-a038-42ef-8204-588b46c67f95.png)

 
Then click on execute.
 
 ![image](https://user-images.githubusercontent.com/5442305/128869459-0727ba7f-5edd-4f8b-9cfe-91066affe2d6.png)


Now we need to modify the report so that the heading tells us which group we are looking at. Follow these steps:

1.	In Knowage report designer, delete the heading.

 ![image](https://user-images.githubusercontent.com/5442305/128869483-ce548e34-5caa-41cf-a873-d3a2e61810a2.png)



2.	Drag the param_item_group to the report heading and change the color to gray and size to 14.


 ![image](https://user-images.githubusercontent.com/5442305/128869502-c2e9243a-5c28-42aa-9361-681ab1a701e7.png)



3.	Reload the template and run the report again selecting “Administrative Costs”. Now the heading will be included in the report depending on what has been selected.

 
![image](https://user-images.githubusercontent.com/5442305/128869515-909b0697-840f-40e4-bc99-3b05bbc97433.png)








